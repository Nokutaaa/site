<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Nokuta</title>
<link rel="icon" href="favicon.jpg" type="image/jpg" />
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  body {
    background-color: white;
    color: black;
    font-family: 'Poppins', sans-serif;
    margin: 0; padding: 0;
    text-align: center;
    overflow-x: hidden;
    perspective: 1500px; /* perspective 3D */
  }

  #bg-video {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    object-fit: cover;
    z-index: -10;
    filter: brightness(0.5);
  }

  .carousel-container {
    position: relative;
    width: 900px;
    height: 300px;
    margin: 150px auto 20px;
    transform-style: preserve-3d;
  }

  .carousel {
    position: relative;
    width: 900px;
    height: 300px;
    margin: 0 auto;
    transform-style: preserve-3d;
    transition: transform 1s ease;
  }

  video {
    position: absolute;
    width: 320px;
    height: 180px;
    border-radius: 8px;
    object-fit: cover;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    transition: filter 0.5s ease, opacity 0.5s ease, transform 0.5s ease;
    user-select: none;
  }

  .video-hidden {
    opacity: 0;
    pointer-events: none;
  }

  .video-center {
    filter: none;
    opacity: 1;
    transform: translateZ(200px) scale(1.1);
    z-index: 10;
    cursor: default;
  }

  .video-side {
    filter: blur(3px) grayscale(50%);
    opacity: 0.6;
  }

  .video-side:hover {
    filter: blur(1px) grayscale(20%);
    opacity: 0.9;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
  }

</style>
</head>
<body>

<div class="logo-container" style="position:absolute;top:60px;left:60px;z-index:1000;">
  <img src="logo1.png" alt="Logo" style="height:50px;" />
</div>

<video autoplay muted loop playsinline id="bg-video">
  <source src="fond.mp4" type="video/mp4" />
  Votre navigateur ne supporte pas la vidéo HTML5.
</video>

<div class="carousel-container">
  <div class="carousel" id="carousel"></div>
</div>

<script>
  const videos = ["video1.mp4", "video2.mp4", "video3.mp4", "video4.mp4", "video5.mp4", "video6.mp4"];
  const carousel = document.getElementById('carousel');
  const total = videos.length;
  let currentIndex = 0;

  // Angle entre chaque vidéo sur l'hexagone (360°/6 = 60°)
  const angleStep = 360 / total;
  const radius = 350; // Distance de la rotation (plus grand = plus éloigné)

  // Pour forcer vidéo 3 et 5 à démarrer à 1s
  function startAtOneSecond(videoElem) {
    function seekAndPlay() {
      if (videoElem.currentTime < 1) {
        videoElem.currentTime = 1;
      }
      videoElem.play().catch(() => {});
      videoElem.removeEventListener('loadedmetadata', seekAndPlay);
    }
    if (videoElem.readyState >= 1) {
      seekAndPlay();
    } else {
      videoElem.addEventListener('loadedmetadata', seekAndPlay);
    }
  }

  function render() {
    carousel.innerHTML = '';

    for(let i = 0; i < total; i++) {
      const vidIdx = (currentIndex + i) % total;
      const video = document.createElement('video');

      video.src = videos[vidIdx];
      video.muted = true;
      video.loop = true;
      video.autoplay = true;
      video.playsInline = true;
      video.setAttribute('preload', 'auto');
      video.controls = (i === 0); // Controls only on the front video

      // Calcul rotation
      const rotateY = i * angleStep;

      // Position 3D circulaire
      video.style.transform = `rotateY(${rotateY}deg) translateZ(${radius}px)`;

      // Classes pour style
      if(i === 0) {
        video.classList.add('video-center');
      } else {
        video.classList.add('video-side');
      }

      // Forcer start à 1s pour vidéos 3 et 5 (indices 2 et 4)
      if(videos[vidIdx] === "video3.mp4" || videos[vidIdx] === "video5.mp4") {
        startAtOneSecond(video);
      }

      // Clic pour mettre la vidéo au centre
      video.addEventListener('click', () => {
        currentIndex = vidIdx;
        render();
      });

      carousel.appendChild(video);
    }

    // Rotation globale pour centrer la vidéo courante
    // On inverse l'angle pour que la vidéo centrale soit face à l'utilisateur
    carousel.style.transform = `translateZ(-${radius}px) rotateY(-${currentIndex * angleStep}deg)`;
  }

  // Navigation au clavier
  window.addEventListener('keydown', (e) => {
    if(e.key === 'ArrowRight') {
      currentIndex = (currentIndex + 1) % total;
      render();
    } else if(e.key === 'ArrowLeft') {
      currentIndex = (currentIndex - 1 + total) % total;
      render();
    }
  });

  render();
</script>

</body>
</html>
