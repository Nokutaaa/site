<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Nokuta - Carrousel Hexagonal</title>
<link rel="icon" href="favicon.jpg" type="image/jpg" />
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  body {
    background-color: white;
    color: black;
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
    overflow-x: hidden;
  }

  #bg-video {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    z-index: -10;
    filter: brightness(0.5);
  }

  .carousel {
    position: relative;
    width: 1000px;
    height: 800px;
    margin: 150px auto 20px;
    user-select: none;
  }

  video {
    border-radius: 8px;
    object-fit: cover;
    position: absolute;
    cursor: pointer;
    transition: all 0.5s ease;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
  }

  .main-video {
    width: 420px;
    height: 236px; /* 16:9 */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
    z-index: 10;
    filter: none;
    cursor: default;
    box-shadow: 0 0 30px rgba(0,0,0,0.6);
  }

  .side-video {
    width: 200px;
    height: 113px; /* 16:9 */
    filter: blur(4px) grayscale(50%);
    opacity: 0.6;
    z-index: 5;
  }

  .side-video:hover {
    filter: blur(1px) grayscale(20%);
    opacity: 1;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }
</style>
</head>
<body>

<div class="logo-container" style="position:absolute;top:60px;left:60px;z-index:1000;">
  <img src="logo1.png" alt="Logo" style="height:50px;" />
</div>

<video autoplay muted loop playsinline id="bg-video">
  <source src="fond.mp4" type="video/mp4" />
  Votre navigateur ne supporte pas la vidéo HTML5.
</video>

<div class="carousel" id="carousel"></div>

<script>
  const videos = ["video1.mp4", "video2.mp4", "video3.mp4", "video4.mp4", "video5.mp4", "video6.mp4"];
  const carousel = document.getElementById('carousel');
  let currentIndex = 0;

  // Positions des 6 vidéos autour du centre (hexagone) en px par rapport au centre (500,400)
  // Rayon du cercle = 350px environ
  const radius = 350;
  // Angle = 60 degrés = PI/3 radians
  const centerX = 500;
  const centerY = 400;

  // calcule position hexagonale pour un index donné (0 à 5)
  function getHexPosition(i, rotationOffset = 0) {
    // i de 0 à 5 : angle = (i * 60°) + rotationOffset en degrés
    const angleDeg = i * 60 + rotationOffset;
    const angleRad = angleDeg * Math.PI / 180;
    return {
      x: centerX + radius * Math.cos(angleRad),
      y: centerY + radius * Math.sin(angleRad)
    };
  }

  // Affiche toutes les vidéos
  // la vidéo au currentIndex sera au centre, les autres placées hexagonalement autour,
  // on fait tourner le ring avec rotationOffset (en degrés) pour l'animation
  let rotationOffset = 0;

  function renderCarousel() {
    carousel.innerHTML = '';
    const len = videos.length;

    // On met la vidéo centrale
    const mainVideo = document.createElement('video');
    mainVideo.src = videos[currentIndex];
    mainVideo.className = 'main-video';
    mainVideo.muted = true;
    mainVideo.loop = true;
    mainVideo.autoplay = true;
    mainVideo.controls = true;
    mainVideo.playsInline = true;
    mainVideo.setAttribute('preload', 'auto');
    mainVideo.addEventListener('canplay', () => mainVideo.play().catch(() => {}));
    carousel.appendChild(mainVideo);

    // Les 5 autres vidéos autour (ring)
    // Les indices des autres vidéos selon currentIndex
    let otherIndices = [];
    for(let i=1; i<len; i++) {
      otherIndices.push( (currentIndex + i) % len );
    }

    otherIndices.forEach((vidIdx, posIdx) => {
      const vid = document.createElement('video');
      vid.src = videos[vidIdx];
      vid.className = 'side-video';
      vid.muted = true;
      vid.loop = true;
      vid.autoplay = true;
      vid.playsInline = true;
      vid.setAttribute('preload', 'auto');

      // Position hexagonale autour
      const pos = getHexPosition(posIdx, rotationOffset);
      vid.style.left = (pos.x - 100) + 'px';  // 100 = largeur/2
      vid.style.top = (pos.y - 56.5) + 'px';  // 56.5 = hauteur/2

      vid.addEventListener('click', () => {
        currentIndex = vidIdx;
        rotationOffset = 0;
        renderCarousel();
      });

      carousel.appendChild(vid);
    });
  }

  // Navigation avec clavier (flèches gauche/droite)
  window.addEventListener('keydown', (e) => {
    if(e.key === "ArrowRight") {
      currentIndex = (currentIndex + 1) % videos.length;
      renderCarousel();
    } else if(e.key === "ArrowLeft") {
      currentIndex = (currentIndex - 1 + videos.length) % videos.length;
      renderCarousel();
    }
  });

  // Optional: rotation animation (décommenter pour tourner doucement)
//   setInterval(() => {
//     rotationOffset = (rotationOffset + 1) % 360;
//     // Ne fait que tourner les vidéos autour (pas la principale)
//     const sideVideos = document.querySelectorAll('.side-video');
//     sideVideos.forEach((vid, i) => {
//       const pos = getHexPosition(i, rotationOffset);
//       vid.style.left = (pos.x - 100) + 'px';
//       vid.style.top = (pos.y - 56.5) + 'px';
//     });
//   }, 40);

  renderCarousel();
</script>
</body>
</html>
