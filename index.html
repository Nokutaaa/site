<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Nokuta</title>
<link rel="icon" href="favicon.jpg" type="image/jpg" />
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
    background: none;
  }

  #bg-video {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    object-fit: cover;
    z-index: -100;
    pointer-events: none;
    opacity: 1;
  }

  .logo-container {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 30;
    animation: glowPulse 3s ease-in-out infinite;
    cursor: pointer;
    transition: top 0.6s ease, transform 0.6s ease;
    user-select: none;
  }

  .logo-container.moved-up {
    top: 15%;
    transform: translate(-50%, 0);
    animation: none;
  }

  .logo-container img {
    height: 80px;
    pointer-events: auto;
  }

  #videos-container {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    overflow: hidden;
    z-index: 10;
  }

  video.floating-video {
    position: absolute;
    border-radius: 8px;
    object-fit: cover;
    filter: blur(1.2px);
    opacity: 0.7;
    pointer-events: auto;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    transition: filter 0.3s ease, opacity 0.3s ease, border-radius 0.6s ease, box-shadow 0.6s ease, transform 0.6s ease;
  }

  video.floating-video:hover {
    filter: blur(0);
    opacity: 1 !important;
    box-shadow: 0 0 20px rgba(0,0,0,0.6);
  }

  #info-container {
    position: fixed;
    top: 50%; left: 50%;
    width: 80vw; height: 60vh;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 1.5rem;
    transform: translate(-50%, -50%);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.8s ease;
    z-index: 25;
    background: rgba(0,0,0,0.7);
    border-radius: 15px;
    padding: 20px;
  }

  #info-container.active {
    opacity: 1;
    pointer-events: auto;
  }

  #info-video {
    width: 45%;
    height: auto;
    max-height: 100%;
    border-radius: 8px;
    object-fit: cover;
  }

  #info-text {
    width: 50%;
    font-size: 1.2rem;
    line-height: 1.4;
  }

  #info-text h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-weight: 600;
    font-size: 2.6rem;
    font-style: italic;
  }

  /* Lecteur vidéo superposé (75% écran, 16/9) */
  #fullscreen-player-overlay {
    display: none;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 75vw;
    max-width: 1280px; /* max width for 75vw on large screens */
    aspect-ratio: 16 / 9;
    background: black;
    z-index: 50;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    border-radius: 12px;
  }

  #fullscreen-player-overlay video {
    width: 100%;
    height: 100%;
    border-radius: 12px;
    background: black;
  }

  /* Overlay pour détecter clic hors player */
  #fullscreen-player-background {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.6);
    z-index: 45;
  }

</style>
</head>
<body>

  <video autoplay muted loop playsinline id="bg-video">
    <source src="fond.mp4" type="video/mp4" />
  </video>

  <audio id="bg-music" src="MUSIQUE.mp3" autoplay loop></audio>

  <div class="logo-container" id="logo">
    <img src="logo1.png" alt="Logo" />
  </div>

  <div id="videos-container"></div>

  <div id="info-container">
    <video id="info-video" src="video me.mp4" autoplay loop muted playsinline></video>
    <div id="info-text">
      <h2>Hey!</h2>
      <p>I am a videographer passionate about capturing life through my camera. My goal is to make viewers feel the deepest emotions possible when watching my videos. While I primarily focus on documentaries and music videos, I’m open to collaborating on any artistic project that inspires me.<br/><br/>Feel free to contact me.</p>
    </div>
  </div>

  <div id="fullscreen-player-background"></div>
  <div id="fullscreen-player-overlay">
    <video controls id="fullscreen-video" src="" playsinline></video>
  </div>

<script>
  window.onload = () => {
    const videosSrc = ["video1.mp4", "video2.mp4", "video3.mp4", "video4.mp4", "video5.mp4", "video6.mp4"];
    const container = document.getElementById("videos-container");
    const videoElements = [];
    const containerWidth = window.innerWidth;
    const containerHeight = window.innerHeight;
    const minY = 50; // minimum distance from top and bottom
    const maxY = containerHeight - 50;

    // Generate random size variation ±20%
    function randomSize(base) {
      return base * (0.8 + Math.random() * 0.4);
    }

    // Positions tracker to avoid overlapping (simple bounding boxes)
    const positions = [];

    function isOverlapping(x, y, width, height) {
      for (const pos of positions) {
        // Check overlap horizontally and vertically
        if (!(x + width + 20 < pos.x || x > pos.x + pos.width + 20 ||
              y + height + 20 < pos.y || y > pos.y + pos.height + 20)) {
          return true;
        }
      }
      return false;
    }

    videosSrc.forEach(src => {
      const video = document.createElement("video");
      video.src = src;
      video.muted = true;
      video.loop = true;
      video.autoplay = true;
      video.playsInline = true;
      video.classList.add("floating-video");

      // taille de base
      const baseWidth = 360;
      const width = randomSize(baseWidth);
      const aspectRatio = 16 / 9;
      const height = width / aspectRatio;

      video.style.width = width + "px";
      video.style.height = height + "px";

      // Choix position aléatoire sans chevauchement
      let x, y;
      let attempts = 0;
      do {
        x = Math.random() * (containerWidth - width);
        y = minY + Math.random() * (maxY - height - minY);
        attempts++;
        if (attempts > 100) break; // sécurité pour éviter boucle infinie
      } while (isOverlapping(x, y, width, height));

      positions.push({x, y, width, height});

      video.style.left = x + "px";
      video.style.top = y + "px";

      container.appendChild(video);
      videoElements.push({el: video, x, y, width, height});
    });

    // Vitesse unique pour toutes les vidéos en px/s
    const speed = 40; // px per second

    // Déplacement continu à gauche -> droite avec wrap-around (Pacman)
    function animateVideos(timestamp) {
      if (!animateVideos.lastTime) animateVideos.lastTime = timestamp;
      const delta = (timestamp - animateVideos.lastTime) / 1000; // secondes écoulées
      animateVideos.lastTime = timestamp;

      videoElements.forEach(obj => {
        obj.x += speed * delta;
        if (obj.x > containerWidth) obj.x = -obj.width;
        obj.el.style.left = obj.x + "px";
      });

      requestAnimationFrame(animateVideos);
    }
    requestAnimationFrame(animateVideos);

    // Musique
    const bgMusic = document.getElementById("bg-music");
    bgMusic.volume = 0.08;
    bgMusic.loop = true;
    bgMusic.play().catch(() => {});

    // Éléments DOM
    const logo = document.getElementById("logo");
    const infoContainer = document.getElementById("info-container");
    const videosContainer = document.getElementById("videos-container");

    // Fullscreen player elements
    const fullscreenOverlay = document.getElementById("fullscreen-player-overlay");
    const fullscreenBackground = document.getElementById("fullscreen-player-background");
    const fullscreenVideo = document.getElementById("fullscreen-video");

    // Etat
    let descriptionVisible = false;
    let playerOpen = false;

    // Gestion clic logo (affiche/masque description)
    logo.addEventListener("click", () => {
      if (descriptionVisible) {
        // Retour écran principal
        infoContainer.classList.remove("active");
        descriptionVisible = false;
        logo.classList.remove("moved-up");
        videosContainer.style.display = "block";
      } else {
        // Affiche description
        infoContainer.classList.add("active");
        descriptionVisible = true;
        logo.classList.add("moved-up");
        videosContainer.style.display = "none";
      }
    });

    // Clic sur vidéo => ouvrir lecteur superposé
    videoElements.forEach(({el}) => {
      el.addEventListener("click", () => {
        if (playerOpen) return; // ignore si déjà ouvert

        // Pause musique
        bgMusic.pause();

        // Cacher autres contenus
        videosContainer.style.display = "none";
        infoContainer.classList.remove("active");
        descriptionVisible = false;
        logo.classList.remove("moved-up");

        // Configurer la vidéo du lecteur
        fullscreenVideo.src = el.src;
        fullscreenVideo.currentTime = 0;
        fullscreenVideo.volume = 0.5;
        fullscreenVideo.play();

        // Afficher lecteur et background overlay
        fullscreenOverlay.style.display = "block";
        fullscreenBackground.style.display = "block";
        playerOpen = true;
      });
    });

    // Clic en dehors du lecteur = fermer lecteur
    fullscreenBackground.addEventListener("click", closePlayer);
    // Clic sur overlay (au cas où) aussi ferme
    fullscreenOverlay.addEventListener("click", e => e.stopPropagation()); // empêcher propagation du clic à background

    function closePlayer() {
      if (!playerOpen) return;

      fullscreenVideo.pause();
      fullscreenVideo.src = "";
      fullscreenOverlay.style.display = "none";
      fullscreenBackground.style.display = "none";
      playerOpen = false;

      // Re-afficher la page principale
      videosContainer.style.display = "block";
      bgMusic.play().catch(() => {});
    }

  };
</script>

</body>
</html>
