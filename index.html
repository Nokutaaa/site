<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Nokuta - Fond Vidéo Dynamique</title>
  <link rel="icon" href="favicon.jpg" type="image/jpg" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
      background: black;
    }

    .floating-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 200px;
      height: 120px;
      object-fit: cover;
      filter: blur(3px) brightness(0.7);
      opacity: 0.4;
      pointer-events: auto;
      transition: transform 1s ease;
      animation: float 10s infinite ease-in-out alternate;
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      100% { transform: translateY(20px); }
    }

    .active-video {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      width: 80vw;
      height: 45vw;
      z-index: 10;
      filter: none;
      opacity: 1;
      pointer-events: auto;
      border-radius: 10px;
      box-shadow: 0 0 30px rgba(0,0,0,0.7);
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }
  </style>
</head>
<body>

<div id="video-container"></div>
<div id="overlay" class="overlay" style="display:none;"></div>

<script>
  const container = document.getElementById('video-container');
  const overlay = document.getElementById('overlay');
  const videoSources = ["video1.mp4", "video2.mp4", "video3.mp4", "video4.mp4", "video5.mp4", "video6.mp4"];

  function random(min, max) {
    return Math.random() * (max - min) + min;
  }

  function createFloatingVideo(src) {
    const video = document.createElement('video');
    video.src = src;
    video.autoplay = true;
    video.muted = true;
    video.loop = true;
    video.playsInline = true;
    video.className = 'floating-video';
    resetPosition(video);
    container.appendChild(video);

    const duration = random(15, 30);
    animate(video, duration);

    video.addEventListener('click', () => {
      document.querySelectorAll('.floating-video').forEach(v => {
        v.style.animationPlayState = 'paused';
        v.muted = true;
      });
      overlay.style.display = 'block';

      const activeVideo = video.cloneNode(true);
      activeVideo.className = 'active-video';
      activeVideo.controls = true;
      activeVideo.muted = false;
      activeVideo.currentTime = 0;
      activeVideo.play();
      container.appendChild(activeVideo);

      overlay.addEventListener('click', () => {
        activeVideo.remove();
        overlay.style.display = 'none';
        document.querySelectorAll('.floating-video').forEach(v => {
          v.style.animationPlayState = 'running';
        });
      }, { once: true });
    });
  }

  function resetPosition(video) {
    video.style.top = random(0, window.innerHeight - 120) + 'px';
    video.style.left = -random(200, 400) + 'px';
    video.style.width = random(160, 320) + 'px';
    video.style.height = (parseInt(video.style.width) * 0.5625) + 'px';
    video.style.opacity = random(0.2, 0.5);
    video.style.filter = `blur(${random(2, 4)}px) brightness(0.7)`;
  }

  function animate(video, duration) {
    const distance = window.innerWidth + 400;
    const startTime = performance.now();

    function move(timestamp) {
      const elapsed = (timestamp - startTime) / 1000;
      const progress = elapsed / duration;
      const left = parseFloat(video.style.left) + distance * progress;
      video.style.left = left + 'px';

      if (progress < 1) {
        requestAnimationFrame(move);
      } else {
        resetPosition(video);
        animate(video, random(15, 30));
      }
    }

    requestAnimationFrame(move);
  }

  // Lancer plusieurs vidéos flottantes
  for (let i = 0; i < 12; i++) {
    const src = videoSources[i % videoSources.length];
    createFloatingVideo(src);
  }
</script>

</body>
</html>
